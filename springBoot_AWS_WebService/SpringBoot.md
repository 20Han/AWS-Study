# 2. 스프링 부트에서 테스트 코드를 작성해보자
* TDD 과정
1. 항상 실패하는 테스트를 작성(Red)
2. 테스트가 통과하는 프로덕션 테스트 작성(Green)
3. 테스트가 통과하면 프로덕션 코드를 리펙토링(Refactor)
* IoC : 사용자가 객체의 제어권을 다른 주체(Spring)에게 넘기는 것
* DI : 의존성을 객체 내부에서 만드는 것이 아닌 외부에서 주입해 주는 것.  
* bean : 사용자가 직접 관리하는 객체가 아닌 스프링 IoC 컨테이너에서 자동적으로 관리하는 객체.

# 3. 스프링 부트에서 JPA로 데이터베이스 다뤄보자
* JPA의 필요성
1. 아무리 java객체를 예쁘게 짜도 DB저장을 위해서는 SQL문을 피할 수 없다. 
2. RDB는 어떻게 데이터를 저장할지에 중점이지만 자바는 기능과 속성을 한 곳에서 관리하는 oop기술. -> 패러다임 불일치
ex) 부모 자식 관의 관계에 있는 두 객체가 db에 저장되면 따로 데이터를 가져오게 되면서 관계가 잘 보이지 않게된다. 
* JPA : 객체지향형 프로그래밍인 자바 코드를 작성하면 RDB에 맞는 SQL을 작성해주는 자바명세서.
* Spring Data JPA : JPA사용을 위해 Spring에서 제공하는 JPA 구현체. Spring Data 프로젝트는 JPA외에도 Redis, MongoDB등을 제공하는데 각 구현체의 인터페이스가 같기 때문에 훗날 db를 교체하는등의 작업에 용이하다. 
* DB Entity 생성 규칙
1. PK는 long으로 하며 auto_increase시킨다. 만약 비즈니스로직적인 Unique Key를 PK로 설정하면 나중에 비즈니스로직이 바뀔때 수정이 어렵다(ex : 주민등록번호)
2. Entity는 Setter를 두지 않고 특정 값을 할당하는 public 메소드를 두어 언제 어떻게 값이 바뀌는지 추적할 수 있도록 한다. 
* 스프링 웹 계층
스프링은 WebLayer, ServiceLayer, Repository, Dtos, Domain Layer로 구성된다. 
    1. Web Layer
    컨트롤러와 뷰 템플릿의 영역
    필터, 인터셉터, 컨트롤러 어드바이스 등 외부 요청과 응답에 대한 전반적인 영역을 이야기한다
    2. Service Layer
    @Service에 사용되는 서비스 영역
    controller와 Dao의 중간 영역에서 사용된다. 
    @Transactional이 사용되어야 하는 영역이기도 하다
    3. Repository Layer
    DB 접근 layer
    Dao 같은 영역
    4. Dtos
    계층 간에 데이터 교환을 위한 객체
    5. Domain Model
    개발 대상을 단순화 시킨 모델. 비즈니스 로직
    @Entity를 도메인 모델이라 생각할 수 있다.
    그러나 항상 db와 관계된것은 아니다. VO(Value Object)같은 객체도 있다.
* 더티체킹 : JPA를 사용하여 영속성 컨텍스트가 활성화된 상태에서 데이터를 db에서 가져올 경우 해당 데이터를 변경하면 트랜잭션이 끝나는 마지막에 자동으로 db update를 해준다. 따라서 따로 update 쿼리를 안날려도 되는 아주 좋은 기술
* 생성시간, 업데이트 시간 관리 : @CreatedDate, @LastModifiedDate 어노테이션을 이용하여 자동으로 생성 및 수정 시간을 기록하는 클래스를 만든다. 이후 이 클래스에 auditing기능을 추가하고 @MappedSuperclass 어노테이션을 사용하여 생성시간, 업데이트 시간이 필요한 클래스에서 사용할 수 있도록 제공할 수 있다

# 4. 머스테치로 화면 구성하기
* 웹 템플릿 엔진 : 지정된 템플릿 양식과 데이터가 합쳐져 HTML 문서를 출력하는 소프트웨어. 리액트, 뷰(Vue)등이 있다.  

* 머스테치 : 여러 언어를 지원하는 템플릿 엔진.
 
* 프론트엔드 라이브러리 사용방법
1. 외부 cdn 사용 : 간단하지만 외부 서비스에 대한 의존성이 생긴다. 책에서는 이 방법 사용
2. 직접 라이브러리를 받아서 사용

* 부트스트랩을 사용할 때 js는 footer에 두어 html의 끝에, css는 header에 두는데 이는 화면을 그리는 역할인 css를 빨리받아야 깨진 화면을 사용자가 볼일이 적어지기 때문이다. 

# 5. 스프링 시큐리티와 OAuth 2.0으로 로그인 기능 구현하기
* OAuth를 사용하면 로그인을 구현하기 위한 수많은 작업(로그인 보안, 비밀번호 찾기, 비번변경, 회원정보 변경, 회원가입시 이메일 혹은 전화번호 인증)을 피할 수 있다
* was 동기화 방법들
1. 톰캣 새션 사용 : 두 대 이상 was를 사용할 경우 세션 공유를 위한 추가 설정 필요
2. MySQL같은 db를 세션 저장소로 사용 : 가장 쉬운 방법이지만 로그인 요청마다 db io가 발생해 성능 이슈가 발생할 수 있다. 보통 사내 오피스, 백오피스에서 사용
3. Redis, Memcached와 같은 메모리 DB를 세션 저장소로 사용 : B2C서비스에서 가장 많이 사용한다. 실제 서비스를 위해서는 Embedded Redis와 같은 방식이 아닌 외부 메모리 서버가 필요

# 6. AWS 서버 환경을 만들어보자
* 자바 기반의 웹 어플리케이션을 위해 필요한 설정들
1. java8 설치
2. 타임존 변경
3. 호스트네임 변경

* RDB(Relative Databasae Service) : AWS에서 지원하는 관계형 DB로 하드웨어 프로비저닝, 데이터베이스 설정, 패치 및 백업 등의 잦은 운영 작업을 자동화하여 개발자가 개발에 집중할 수 있게 지원해줍니다. 

* Amazon Aurora : AWS에서 MySQL과 PostgreSQL을 클라우드 기반에 맞게 재구성한 DB. 그러나 프리티어는 없고 월 10만원 이상 부터 시작. 





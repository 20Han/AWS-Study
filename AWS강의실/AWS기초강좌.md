# 1. 클라우드 컴퓨터란
* 온디멘드로 컴퓨터를 사용하기 때문에 서버 구축비용이 들지 않으며 사용량에 따라 서버 리소스가 변한다

# 2. 클라우드 컴퓨터의 유형
## 1) 클라우드 컴퓨팅 모델
* Iaas : 인프라만 제공, OS를 직접 설치하고 소프트웨어를 개발해서 사용, 가상의 컴퓨터 임대와 비슷
    ex) AWS EC2
* Paas : 인프라 + OS + 기타 프로그램 실행에 필요한 부분(런타임), 코드만 바로 올려서 돌릴 수 있음
    ex) Firebase, Google App engine
* Saas : 인프라 + OS + 필요한 소프트웨어 모두 제공, 설치 없이 사용가능
    ex) 지메일, 구글 드롭박스
    
## 2) 클라우드 컴퓨팅 배포 모델
* 공개형 : 모든 부분이 클라우드에서 실행, 낮은 비용, 높은 확장성
    ex) AWS
* 폐쇄형 : 직접 클라우드 환경 실행, 높은 수준의 커스터마이징 가능, 초기 비용 비쌈
* 혼합형 : 폐쇄형 공개형의 혼합, 폐쇄형 -> 공개형 과도기에 많이 쓰임 

# 3. AWS의 구조-리전,가용역역,엣지로케이션
* 리전 : AWS의 서비스가 제공되는 DB center의 물리적 위치, 각 리전에는 코드가 부여됨. 리전별로 가능한 서비스가 다르다. 
 ex) ap-northease-2 (서울리전), us-east-1(미국 동부, 버지니아 북부)
    지연속도, 법률, 사용 가능한 AWS 서비스를 고려해야 한다. 
* 가용영역(Availability Zone) : 하나 이상의 데이터 센터로 구성된 리전의 하부 단위. 한 리전은 적어도 둘 이상의 가용영역으로 구분된다. 계정별로 같은 이름의 AZ라도 실제 데이터 센터는 다를 수 있다.
* 엣지 로케이션 : AWS의 cloudFront(CDN)등의 여러 서비스들을 가장 빠른 속도로 제공(캐싱)하기 위한 거점
* 글로벌 서비스와 리전 서비스 
    * 글로벌 서비스 : CloudFront, IAM, Rout53, WAF
    * 지역 서비스 : 특정 리전을 기반으로 데이터및 서비스 제공 (대부분의 서비스, S3 : 전 세계에서 동일하게 사용할 수 있으나 데이터 자체는 리전에 종속된다)
* ARN(Amazon Resource Name) : AWS의 모든 리소스의 고유 아이디

# 5. IAM 기초
* IAM(Identity Access Management) : AWS 서비스와 리소스에 대한 액세스를 관리할 수 있는 기능. 글로벌 서비스
* 구성
    * 사용자 : 실제 AWS 사용자
    * 그룹 : 사용자의 집합.
    * 정책 : 사용자와 그룹, 역할이 무엇을 할 수 있는지에 대한 문서. JSON 형식으로 정의
    * 역할 : AWS 리소스(EC2, 람다...)에 부여하여 AWS 리소스가 무엇을 할 수 있는지를 정의
    * 사용자 -> 그룹 -> 역할 순으로 권한을 체크한다. 
* 사용자의 종류
    * 루트 사용자 : 결제 관리를 포함한 계정의 모든 권한을 가지고 있음
        * 관리 목적 이외의 다른 용도로 사용하지 않는 것을 권장
        * 탈취 시 복구가 매우 어려 -> MFA 설정 권장
    * IAM 사용자 : IAM을 통해 생성해서 사용하는 사용자. 
        * AdminAccess를 부여하더라도 루트 사용자로 별도 설정하지 않으면 Billing기능을 사용할 수는 없다. 
* IAM 자격 증명 보고서
    * 계정의 모든 사용자와 암호, 엑세스 키, MFA 장치등의 증명 상태를 나열하는 보고서를 생성
* IAM 모범 사용 사례
    * 루트 사용자는 사용하지 않기
    * 불필요한 사용자는 만들지 않기
    * 가능하면 그룹과 정책 사용
    * 최소한의 권한만을 허용하는 습관
    * MFA 활성화
    * AccessKey대신 역할 활용
    * IAM 자격 증명 보고서 활용

# 6. 가상화란(virtualization)?
* 가상화 
    * 단일 컴퓨터의 하드웨어 요소(빌드, 웹, 메일 등등) 를 가상 머신(VM)이라고 하는 다수의 가상 컴퓨터로 분할할 수 있도록 해주는 기술
    * 일반적인 컴퓨터는 특권명령 때문에 하나의 컴퓨터에서 하나의 OS만 사용할 수 있었는데 
* 가상화 역사
    * 1세대(완전 가상화) : 모든 시스템 요소(app, os, hardware)을 모두 에뮬레이터 안에서 돌림. 매우 느림
    * 2세대 (Paravirtualization) : guest OS가 하이퍼바이저라고 하는 OS와 Harware를 중재하는 가상화 매니저를 통해 하드웨어에 접근하도록 함. 하지만 여전히 느림
    * 3세대 (Hardware Virtual Machine : HVM) : 하드웨어에서 직접 가상화를 지원. guest OS가 하드웨어에 직접 접근
* 가상화와 클라우드 : AWS에서 사용자마다 컴퓨터를 할당하는 것이 아닌 이미 구축된 가상화 가능한 서버의 한 부분을 할당해준다. 

# 7. EC2 (1) : 소개
* 용어
    * EBS : Elastic Block Storage의 줄임말로 클라우드에서 사용하는 가상 하드디스크
    * AMI : EC2 인스턴스를 실행하기 위한 정보를 담고 있는 이미지
    * 보안 그룹 : 가상의 방화벽
    
    
# 8. EC2 (2) : 가격 정책
* 가격 정책
    * On-Demand : 실행하는 인스턴스에 따라 시간 또는 초당 가격 지불
    * Spot Instance : 경매 형식으로 시장에 남는 인스턴스를 저렴하게 구매해서 쓰는 방법, 지정 가격보다 낮을 때만 스팟 인스턴스 사용. 반환 시점을 알 수 없어서 인스턴스 확보, 종료를 반복해도 문제 없는 분산 아키텍쳐 필요(ML, 빅데이터처리 등의 작업에 주로 사용)
    * 예약 인스턴스(Reserved Instance-RI) : 미리 일정기간(1년, 3년) 약정해서 쓰는 방법
    * 전용 호스트(Dedicated) : 실제 물리적인 서버를 임대하는 방식, 라이선스 이슈, 퍼포먼스 이슈(CPU Steal : 서버가 가상화 되어 있지만 그래도 물리적으로는 혼합되어서 쓰기 때문에 CPU 성능에 가상화된 서버끼리 영향을 미침), 혹은 다른 규정이 있을 때.
    * 스팟 인스턴스 < 예약인스턴스 < 온디맨드 < 전용호스트
    * 데이터 통신은 AWS바깥으로 나가는 트래픽에 대해서만 요금을 부과한다
    
# 9. EC2 (3) : 유형과 사이즈
* 인스턴스 유형
    * 유형 : 인스턴스 별로 사용 목적에 따라 최적화 시킨 것
    * 범용, 컴퓨팅 최적화, 메모리 최정화, 저장 최적화 등의 유형이 있음
* 인스턴스 크기
    * 인스턴스의 cpu 개수, 메모리 크기, 성능 등
* (인스턴스 타입)(세대)(접두사).(크기) 순으로 이름을 붙인다

# 10. EC2 (4) : EBS, Snapshot, AMI
* EBS(Elastic Block Store)
    * EC2 인스턴스에서 사용하는 영구 블록 스토리지
    * EC2와 EBS는 분리되어 있고 네트워크로 연결되어 있기 때문에 EC2 인스턴스가 종료되어도 계속 유지할 수 있다.
    * 이를 통해 EC2 인스턴스를 바꾸어도 EBS는 유지되기 때문에 쉽게 업그레이드, 다운그레이드를 할 수 있다. 
    * 루트 볼륨으로 사용시 EC2가 종료되면 같이 삭제된다. 설정을 통해 EBS만 따로 존속 가능하다
    * EC2와 같은 가용영역에 존재
* Snapshot
    * 특정 시간에 EBS 상태의 저장본, S3에 보관
* AMI(Amazon machine image)
    * EC2 인스턴스를 실행하기 위해 필요한 정보를 모은 단위
    * EC2 복제 및 다른 리전 -> 계정으로 전달 가능하다
    * 스냅샷을 기반으로 AMI 구성이 가능하다
    * 구성 : 1개 이상의 EBS 스냅샷, OS, 사용권한, EBS 정보
* 인스턴스 스토어
    * EC2 내부에 있는 저장소, 그러나 EC2를 삭제하면 저장소도 같이 사라진다. 
    * 캐시 데이터 등을 저장한다.

# 11. EC2 (5) : 생명주기
* 중지
    * 중지 중에는 인스턴스 요금 미 청구
    * EBS요금, 다른 구성요소(Elastic IP)는 청구된다
    * 중지 후 재시작시 퍼블릭 IP 변경
    * EBS를 사용하는 인스턴스만 중지 가능. 인스턴스 스토어 인스턴스는 중지 불가 (종료만 가능)
* 재부팅
    * 퍼블릭 IP 변동 없음
* 최대 절전 모드
    * 메모리 내용을 보존해서 재시작시 중단지점에서 시작할 수 있는 정지 모드
* 요금 청구
    * 청구 : running, 최대절전 stopping
    * 미청구 : pending, stopping, stopped, shutting-down, terminated
    
# 12. 오토스케일링
* 스케일링
    * vertical Scale(Scale Up) : 하나의 CPU 자체를 더 큰 메모리와 성능을 가지는 cpu로 대체. 하지만 비용이 기하급수적으로 늘어난다
    * Horizontal Scale(Scale Out) : 여러 인스턴스를 하나의 인스턴스 처럼 사용
    
* AWS Auto Scaling
    * 어플리케이션을 모니터링하고 인스턴스 개수를 자동으로 조정하는 기능
    * EC2, DDB, SPOT Fleet 등 여러가지 구성요소에 대한 오토스케일링 기능이 있다. 
    * AWS Auto Scaling의 목표
        * 정확한 수의 EC2 인스턴스를 보유하도록 보장
        * 그룹의 최소 인스턴스 숫자 및 최대 인스턴스 숫자 설정 가능
        * 다양한 스케일링 정책(CPU 부하에 따른 인스턴스 크기 조절)
        * 가용 영역에 인스턴스가 골고로 분산될 수 있도록 인스턴스 분배
        
* 오토스케일링의 구성
    * 시작 구성(launch configurations)/시작 템플릿(launch template) : 무엇을 실행시킬 것인가에 대한 설정
        * EC2의 타임, 사이즈
        * AMI
        * 보안 그룹, key, IAM
        * 유저 데이터
    * 모니터링 : 언제 실행시킬 것인가?
        * 예 : CPU 점유율이 일정 %를 넘었을 경우 추가 실행 등등
        * CloudWatch, ELB와 연계
    * 설정 : 얼마나, 어떻게 실행시킬 것인가
        * 최대, 최소 숫자
        * ELB 연동 여부 등
